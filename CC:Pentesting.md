# CC:Pentesting Write-Up

A TryHackMe beginner level room, which provides an introduction to various tools and concepts commonly encountered in penetration testing

## Deploy the machine
Turn on OpenVPN on your machine to connect to corresponding server

If you don't have OpenVPN, then go download it and type 'sudo openvpn <OpenVPN_filename>' in terminal

## [Section 1 - Network Utilities] - nmap

nmap = 'Network Mapper'

nmap -> allows a pen tester to see which ports are open, and information about which services are running on those ports

```language
-p : specify which ports to scan
-sn: ping scan
-sU: UDP scan
-sC: run default scripts
-sV: show versions of services
-A : aggressive mode (enable OS detection, version detection, script scanning and traceroute)
-O : enable OS detection
```

### 1. How many ports are open on the machine?
```bash
	nmap -sC -sV -oN <IP_Address>
```
#### answer: 1

### 2. What service is running on the machine?
refer to information above
#### answer: Apache

### 3. What is the version of the service?
refer to information above
#### answer: 2.4.18

### 4. What is the output of the http-title script(included in default scripts)?
refer to information above
#### answer: Apache2 Ubuntu Default Page: It Works


## [Section 1 - Network Utilities] - Netcat

nc -> allow users to connect to specific ports and send and receive data

Types of shells

1: Bind Shell
A type of shell in which the target machine opens up a communication port or a listener on the victim machine and waits for an incoming connection. The attacker then connects to the victim machineâ€™s listener which then leads to code or command execution on the server.

2: Reverse Shell
A type of shell in which the target machine communicates back to the attacking machine. The attacking machine has a listener port on which it receives the connection, which by using, code or command execution is achieved.

```language
-l : listen for connections
-v : enable verbose mode (allow you to see who connected to you)
-p : specify a port to listen on
-e : specify which porgram to execute after connecting to a host
-u : UDP mode
```


## [Section 2 - Web Enumeration] - gobuster

gobuster -> try to find valid directories from a wordlist of possible directories, as well as valid subdomains

<Commands>

```language
dir: use directory/file enumeration mode
dns: use DNS subdomain enumeration mode
fuzz: use fuzzing mode
s3 : use aws bucket enumeration mode
version: show the current version
vhost: use VHOST enumeration mode
```

<Flags>

```language
  -f, --add-slash                     Append / to each request
  -c, --cookies string                Cookies to use for the requests
  -e, --expanded                      Expanded mode, print full URLs
  -x, --extensions string             File extension(s) to search for
  -r, --follow-redirect               Follow redirects
  -H, --headers stringArray           Specify HTTP headers, -H 'Header1: val1' -H 'Header2: val2'
  -h, --help                          help for dir
  -l, --include-length                Include the length of the body in the output
  -k, --no-tls-validation             Skip TLS certificate verification
  -n, --no-status                     Don't print status codes
  -P, --password string               Password for Basic Auth
  -p, --proxy string                  Proxy to use for requests [http(s)://host:port]
  -s, --status-codes string           Positive status codes (will be overwritten with status-codes-blacklist if set) (default "200,204,301,302,307,401,403")
  -b, --status-codes-blacklist string Negative status codes (will override status-codes if set)
      --timeout duration              HTTP Timeout (default 10s)
  -u, --url string                    The target URL
  -a, --useragent string              Set the User-Agent string (default "gobuster/3.1.0")
  -U, --username string               Username for Basic Auth
  -d, --discover-backup               Upon finding a file search for backup files
      --wildcard                      Force continued operation when wildcard found
```

<Global Flags>

```language
  -z, --no-progress       Don't display progress
  -o, --output string     Output file to write results to (defaults to stdout)
  -q, --quiet             Don't print the banner and other noise
  -t, --threads int       Number of concurrent threads (default 10)
      --delay duration    Time each thread waits between requests (e.g. 1500ms)
  -v, --verbose           Verbose output (errors)
  -w, --wordlist string   Path to the wordlist
```


### 1. How to find a hidden directory?

```bash
  	gobuster dir -u http://<IP_ADDRESS> -w /usr/share/wordlists/dirb/common.txt -t 64
```
#### Answer: secret

### 2. How to find a hidden directory with the extension xxa?

```bash
  	gobuster dir -u http://<IP_ADDRESS> -w /usr/share/wordlists/dirb/common.txt -x xxa -t 64 -q
```
#### Answer: password


## [Section 2 - Web Enumeration] - nikto

nikto -> allow user to find common vulnerabilities. Commonly used to check for CVE's and general information about web server

```language
       -config+            Use this config file
       -Display+           Turn on/off display outputs
       -dbcheck            check database and other key files for syntax errors
       -Format+            save file (-o) format
       -Help               Extended help information
       -host+              target host/URL
       -id+                Host authentication to use, format is id:pass or id:pass:realm
       -list-plugins       List all available plugins
       -output+            Write output to this file
       -nossl              Disables using SSL
       -no404              Disables 404 checks
       -Plugins+           List of plugins to run (default: ALL)
       -port+              Port to use (default 80)
       -root+              Prepend root value to all requests, format is /directory
       -ssl                Force ssl mode on port
       -Tuning+            Scan tuning
       -timeout+           Timeout for requests (default 10 seconds)
       -update             Update databases and plugins from CIRT.net
       -Version            Print plugin and database versions
       -vhost+             Virtual host (for Host header)
                + requires a value
```
refer to this information above to answer the questions


## [Section 3 - Metasploit] - 


## [Section 4 - Hash Cracking] - Salting and Formatting

- Every hash has the exact same format

- Salts are typically appended onto the hash with a colon and the salt

A salt is random data that is used as an additional input to a one-way function that hashes data, a password or passphrase


## [Section 4 - Hash Cracking] - Hashcat

Hashcat -> a hash cracking tool

- It does not have auto detection for hashtypes, instead it has modes. You use different modes depending on what type of hashes you are trying to crack. For example, mode 0 would be used for a md5 hash and mode 100 for a SHA1 hash.

### 1. What flag sets the mode?
To see flags, type netcat -h
#### Answer: -m

### 2. What flag sets the "attack mode"?
To see flags, type netcat -h
#### Answer: -a

### 3. What is the attack mode number for Brute-force?
To see attack mode number, type netcat -h
#### Answer: 3

### 4. What is the mode number for SHA3-512?
To see mode numbers, type netcat -h
#### Answer: 17600

### 5. Crack This Hash:56ab24c15b72a457069c5ea42fcfc640 Type: MD5
You can look it up on google and find website that helps to crack any type of hashes.
#### Answer: happy

### 6. Crack This Hash:4bc9ae2b9236c2ad02d81491dcb51d5f Type: MD4
You can look it up on google and find website that helps to crack any type of hashes.
#### Answer: nootnoot


## [Section 4 - Hash Cracking] - John The Ripper

jtr -> a free password cracking software tool
It supports numerous formats of hashes and is extremely easy to use, while having a lot of options for customization. 

```language
--single[=SECTION[,..]]    "single crack" mode, using default or named rules
--single=:rule[,..]        same, using "immediate" rule(s)
--wordlist[=FILE] --stdin  wordlist mode, read words from FILE or stdin
                  --pipe   like --stdin, but bulk reads, and allows rules
--loopback[=FILE]          like --wordlist, but extract words from a .pot file
--dupe-suppression         suppress all dupes in wordlist (and force preload)
--prince[=FILE]            PRINCE mode, read words from FILE
--encoding=NAME            input encoding (eg. UTF-8, ISO-8859-1). See also
                           doc/ENCODINGS and --list=hidden-options.
--rules[=SECTION[,..]]     enable word mangling rules (for wordlist or PRINCE
                           modes), using default or named rules
--rules=:rule[;..]]        same, using "immediate" rule(s)
--rules-stack=SECTION[,..] stacked rules, applied after regular rules or to
                           modes that otherwise don't support rules
--rules-stack=:rule[;..]   same, using "immediate" rule(s)
--incremental[=MODE]       "incremental" mode [using section MODE]
--mask[=MASK]              mask mode using MASK (or default from john.conf)
--markov[=OPTIONS]         "Markov" mode (see doc/MARKOV)
--external=MODE            external mode or word filter
--subsets[=CHARSET]        "subsets" mode (see doc/SUBSETS)
--stdout[=LENGTH]          just output candidate passwords [cut at LENGTH]
--restore[=NAME]           restore an interrupted session [called NAME]
--session=NAME             give a new session the NAME
--status[=NAME]            print status of a session [called NAME]
--make-charset=FILE        make a charset file. It will be overwritten
--show[=left]              show cracked passwords [if =left, then uncracked]
--test[=TIME]              run tests and benchmarks for TIME seconds each
--users=[-]LOGIN|UID[,..]  [do not] load this (these) user(s) only
--groups=[-]GID[,..]       load users [not] of this (these) group(s) only
--shells=[-]SHELL[,..]     load users with[out] this (these) shell(s) only
--salts=[-]COUNT[:MAX]     load salts with[out] COUNT [to MAX] hashes
--costs=[-]C[:M][,...]     load salts with[out] cost value Cn [to Mn]. For
                           tunable cost parameters, see doc/OPTIONS
--save-memory=LEVEL        enable memory saving, at LEVEL 1..3
--node=MIN[-MAX]/TOTAL     this node's number range out of TOTAL count
--fork=N                   fork N processes
--pot=NAME                 pot file to use
--list=WHAT                list capabilities, see --list=help or doc/OPTIONS
--format=NAME              force hash of type NAME. The supported formats can
                           be seen with --list=formats and --list=subformats
```

### 1. What flag let's you specify which wordlist to use?  
refer to information above
#### answer: -wordlist

### 2. What flag lets you specify which hash format(Ex: MD5,SHA1 etc.) to use?
refer to information above
#### answer: --format

### 3. How do you specify which rule to use?
refer to information above
#### answer: --rules

### 4. Crack this hash:5d41402abc4b2a76b9719d911017c592 Type: MD5
```bash
	echo 5d41402abc4b2a76b9719d911017c592 > hash.txt
	john --wordlist=/usr/share/wordlists/rockyou.txt --format=raw-md5 hash1.txt
```
#### answer: Hello

### 5. Crack this hash:5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8 Type: SHA1
```bash
	echo 5baa61e4c9b93f3f0682250b6cf8331b7ee68fd8 > hash.txt
	john --wordlist=/usr/share/wordlists/rockyou.txt --format=raw-sha1 hash.txt
```
#### answer: password